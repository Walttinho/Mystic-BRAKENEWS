{
  "mistyc-open-api": "1.0.0",
  "info": {
    "title": "Mystic BreakNews API Documentation",
    "description": "Welcome to the Mystic BreakNews API Documentation! Here, you will find comprehensive information about the API's endpoints and how to utilize them. Explore the available routes and test their functionality. Don't forget to register and complete the authorization process to unlock the full potential of the API.",
    "contact": {
      "email": "walter.netto@live.com"
    },
    "version": "1.0.0"
  },
  "server": [
    {
      "url": "http://localhost:3000",
      "description": "Local Server"
    }
  ],
  "paths": {
    "/auth/login": {
      "post": {
        "summary": "User login",
        "description": "Authenticate a user and generate an authentication token",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "User credentials",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string",
                  "description": "User email"
                },
                "password": {
                  "type": "string",
                  "description": "User password"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful login",
            "schema": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string",
                  "description": "Authentication token"
                }
              }
            }
          },
          "404": {
            "description": "User or Password not found"
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "summary": "User logout",
        "description": "Invalidate the authentication token and perform user logout",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "User ID and token",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "userId": {
                  "type": "string",
                  "description": "User ID"
                },
                "token": {
                  "type": "string",
                  "description": "Authentication token"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Logout successful",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "description": "Logout message"
                }
              }
            }
          }
        }
      }
    },
    "/create": {
      "post": {
        "tags": ["News"],
        "summary": "Create a new news article",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "description": "The title of the news article",
                    "example": "Breaking News"
                  },
                  "text": {
                    "type": "string",
                    "description": "The text content of the news article",
                    "example": "Lorem ipsum dolor sit amet"
                  },
                  "banner": {
                    "type": "string",
                    "description": "The URL of the news article's banner image",
                    "example": "https://example.com/banner.jpg"
                  }
                },
                "required": ["title", "text", "banner"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "News created successfully",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "description": "A success message",
                  "example": "News created successfully"
                },
                "news": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "The ID of the news article",
                      "example": "60c05fd318c8e90123456789"
                    },
                    "title": {
                      "type": "string",
                      "description": "The title of the news article",
                      "example": "Breaking News"
                    },
                    "text": {
                      "type": "string",
                      "description": "The text content of the news article",
                      "example": "Lorem ipsum dolor sit amet"
                    },
                    "banner": {
                      "type": "string",
                      "description": "The URL of the news article's banner image",
                      "example": "https://example.com/banner.jpg"
                    },
                    "likes": {
                      "type": "array",
                      "description": "The users who liked the news article",
                      "items": {
                        "type": "object",
                        "properties": {
                          "userId": {
                            "type": "string",
                            "description": "The ID of the user who liked the news article",
                            "example": "60c05fd318c8e90123456789"
                          },
                          "created": {
                            "type": "string",
                            "format": "date-time",
                            "description": "The date and time when the like was created",
                            "example": "2023-06-16T12:34:56Z"
                          }
                        }
                      }
                    },
                    "comments": {
                      "type": "array",
                      "description": "The comments posted on the news article",
                      "items": {
                        "type": "object",
                        "properties": {
                          "idComment": {
                            "type": "string",
                            "description": "The ID of the comment",
                            "example": "60c05fd318c8e90123456789"
                          },
                          "text": {
                            "type": "string",
                            "description": "The text content of the comment",
                            "example": "Great news!"
                          },
                          "userId": {
                            "type": "string",
                            "description": "The ID of the user who posted the comment",
                            "example": "60c05fd318c8e90123456789"
                          },
                          "created": {
                            "type": "string",
                            "format": "date-time",
                            "description": "The date and time when the comment was created",
                            "example": "2023-06-16T12:34:56Z"
                          }
                        }
                      }
                    },
                    "created": {
                      "type": "string",
                      "format": "date-time",
                      "description": "The date and time when the news article was created",
                      "example": "2023-06-16T12:34:56Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "description": "An error message",
                  "example": "Title, text, and banner are required fields"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "tags": ["News"],
        "summary": "Get all news articles",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of news articles to be returned",
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Number of news articles to skip",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "The ID of the news article",
                    "example": "60c05fd318c8e90123456789"
                  },
                  "title": {
                    "type": "string",
                    "description": "The title of the news article",
                    "example": "Breaking News"
                  },
                  "text": {
                    "type": "string",
                    "description": "The text content of the news article",
                    "example": "Lorem ipsum dolor sit amet"
                  },
                  "banner": {
                    "type": "string",
                    "description": "The URL of the news article's banner image",
                    "example": "https://example.com/banner.jpg"
                  },
                  "likes": {
                    "type": "array",
                    "description": "The users who liked the news article",
                    "items": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "string",
                          "description": "The ID of the user who liked the news article",
                          "example": "60c05fd318c8e90123456789"
                        },
                        "created": {
                          "type": "string",
                          "format": "date-time",
                          "description": "The date and time when the like was created",
                          "example": "2023-06-16T12:34:56Z"
                        }
                      }
                    }
                  },
                  "comments": {
                    "type": "array",
                    "description": "The comments posted on the news article",
                    "items": {
                      "type": "object",
                      "properties": {
                        "idComment": {
                          "type": "string",
                          "description": "The ID of the comment",
                          "example": "60c05fd318c8e90123456789"
                        },
                        "text": {
                          "type": "string",
                          "description": "The text content of the comment",
                          "example": "Great news!"
                        },
                        "userId": {
                          "type": "string",
                          "description": "The ID of the user who posted the comment",
                          "example": "60c05fd318c8e90123456789"
                        },
                        "created": {
                          "type": "string",
                          "format": "date-time",
                          "description": "The date and time when the comment was created",
                          "example": "2023-06-16T12:34:56Z"
                        }
                      }
                    }
                  },
                  "created": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date and time when the news article was created",
                    "example": "2023-06-16T12:34:56Z"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/top": {
      "get": {
        "summary": "Get the top news articles",
        "tags": ["News"],
        "security": [],
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of top news articles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "title": {
                        "type": "string",
                        "example": "Breaking News"
                      },
                      "content": {
                        "type": "string",
                        "example": "This is the content of the news article."
                      },
                      "author": {
                        "type": "string",
                        "example": "John Doe"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/search": {
      "get": {
        "summary": "Search news articles by title",
        "tags": ["News"],
        "security": [],
        "parameters": [
          {
            "in": "query",
            "name": "title",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "Title of the news article to search for"
          }
        ],
        "responses": {
          "200": {
            "description": "List of matching news articles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "title": {
                        "type": "string",
                        "example": "Breaking News"
                      },
                      "content": {
                        "type": "string",
                        "example": "This is the content of the news article."
                      },
                      "author": {
                        "type": "string",
                        "example": "John Doe"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/byUser": {
      "get": {
        "summary": "Get news articles by user",
        "tags": ["News"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of news articles by the user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "title": {
                        "type": "string",
                        "example": "Breaking News"
                      },
                      "content": {
                        "type": "string",
                        "example": "This is the content of the news article."
                      },
                      "author": {
                        "type": "string",
                        "example": "John Doe"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/{id}": {
      "get": {
        "summary": "Get a news article by ID",
        "tags": ["News"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "ID of the news article"
          }
        ],
        "responses": {
          "200": {
            "description": "Details of the news article",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string",
                      "example": "Breaking News"
                    },
                    "content": {
                      "type": "string",
                      "example": "This is the content of the news article."
                    },
                    "author": {
                      "type": "string",
                      "example": "John Doe"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "patch": {
        "summary": "Update a news article by ID",
        "tags": ["News"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "ID of the news article"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "example": "Updated News Title"
                  },
                  "content": {
                    "type": "string",
                    "example": "This is the updated content of the news article."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "News article updated successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "summary": "Delete a news article by ID",
        "tags": ["News"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "ID of the news article"
          }
        ],
        "responses": {
          "200": {
            "description": "News article deleted successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/like/{id}": {
      "patch": {
        "summary": "Like a news article",
        "tags": ["News"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "ID of the news article"
          }
        ],
        "responses": {
          "200": {
            "description": "News article liked successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/comment/{id}": {
      "patch": {
        "summary": "Add a comment to a news article",
        "tags": ["News"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "ID of the news article"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "comment": {
                    "type": "string",
                    "example": "Great article!"
                  }
                },
                "required": ["comment"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comment added successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/comment/{idNews}/{idComment}": {
      "patch": {
        "summary": "Delete a comment from a news article",
        "tags": ["News"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idNews",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "ID of the news article"
          },
          {
            "in": "path",
            "name": "idComment",
            "schema": {
              "type": "string"
            },
            "required": true,
            "description": "ID of the comment"
          }
        ],
        "responses": {
          "200": {
            "description": "Comment deleted successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/user/": {
      "post": {
        "summary": "Create a new user",
        "description": "Route responsible for creating a new user",
        "tags": ["Users"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              },
              "examples": {
                "Users": {
                  "value": {
                    "name": "Cacau Lima",
                    "username": "cacode",
                    "email": "clima@gmail.com",
                    "password": "1234567",
                    "avatar": "https://i.imgur.com/Ry1cb5M.png",
                    "background": "https://images.wallpapersden.com/image/download/triangle-8k-blue-pattern_bGZlbmiUmZqaraWkpJRmbmdlrWZlbWU.jpg"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "400": {
            "description": "Not Found"
          },
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schemma": {
                  "type": "object",
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/user": {
      "get": {
        "summary": "Search all users",
        "description": "Route responsible for fetching all users",
        "tags": ["Users"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Not Found"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/User"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/{id}/": {
      "get": {
        "summary": "Search user by id",
        "description": "Route responsible for searching for user by id",
        "tags": ["Users"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "User ID",
            "required": true
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Not Found"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/user/{id}": {
      "patch": {
        "summary": "Update user by id",
        "description": "Route responsible for editing the user by id",
        "tags": ["Users"],
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "string",
            "description": "User ID",
            "required": true
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              },
              "examples": {
                "Users": {
                  "value": {
                    "name": "Thiago Lima"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Not Found"
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    }
  },

  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "avatar": {
            "type": "string"
          },
          "background": {
            "type": "string"
          }
        }
      },
      "News": {
        "type": "object",
        "properties": {
          "user": {
            "type": "string"
          },
          "banner": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "text": {
            "type": "string"
          },
          "likes": {
            "type": "number"
          },
          "comments": {
            "type": "array"
          },
          "createdAt": {
            "type": "date"
          }
        }
      },
      "Comment": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          }
        }
      }
    }
  }
}
